- 逃逸分析
  - 分析对象动态作用域，当一个对象在方法中被定义后，可能会被外部方法所引用，比如方法调用，也有可能被其他线程访问，比如类变量，这两种情况分别叫做对象的**方法逃逸**和**线程逃逸**
- 优化(不存在线程逃逸和方法逃逸)
  - 同步消除：如果确定一个变量不会发生线程逃逸，也就是不会被其他线程访问到，那对于这个变量的同步操作就会被去除
  - 栈上分配：如果确定一个对象不会发生方法逃逸，直接在栈帧中为该对象分配空间
  - 标量替换：
    - **标量**是指一个数据已经不能用更小的数据来表示了，java中的基本类型以及String都属于标量
    - 可以被分解的就叫做**聚合量**，java中对象就是典型的聚合量
    - 如果确定对象不会逃逸，并且对象可以被分解，那么使用时可能不会创建对象，而是只在栈中创建对象中被使用到的标量

- this逃逸
  - 在构造函数返回之前，其它线程就持有该对象的引用，调用尚未构造完全的对象的方法
  
- 安全构造
  - 构造期间，不要公布this引用
    - 显式：将 this 存储在静态字段或集合
    - 隐式：当将一个引用公布给构造函数中的非静态内部类的实例 eventSource.register(this)
  - 不要在构造函数内启动线程
  - 静态初始化器
    - 静态初始化器是由JVM在类的初始化阶段执行，即在类被加载后并且被线程使用前。在静态初始化期间，内存写入操作将自动对所有线程可见
  - 含有final域的对象
    - 含有final域的对象，初始化安全性可以防止对对象引用的写入操作被重排序到对象构造过程之前。在构造函数完成时，构造函数对final域的所有写入操作，以及通过final域可以到达的任何变量的写入操作，都能够被获取到该对象引用的线程看到。
