## 临界区
- 公共资源，但每次只能被一个线程使用

## 并发级别
- 阻塞 synchronized或者重入锁
- 无饥饿 公平锁
- 无障碍 都能进入资源，检测到冲突则回滚
- 无锁 要求有一个线程可以再有限步内完成操作
- 无等待 所有的线程都在有限步内完成

## 并行定律
- Amdahl定律
  - 加速比 = 优化前系统耗时/优化后系统耗时
  - 使用多核CPU对系统进行优化，效果取决于CPU的数量及系统中串行化程序的比重
  - 当串行比例一定时，加速比是有上限的
- Gustafson定律
 - 加速比S(n) = n - F(n - 1) n为CPU个数，F = a/(a+b)，a为串行时间，b为并行时间
 - 如果并行化代码所占比重足够多，加速比就能随着CPU个数量线性增长
 
 ## Java并发的关键特性
 - 原子性
 - 可见性
 - 有序性
  - 指令重排保证一个线程内串行语义一致性，但不保证多线程间的语义一致
## 指令重排
- 指令流水线可减少指令等待，而指令重排可减少流水线的中断
- 不能重排的指令：Happen-Before规则
  - 程序顺序原则：一个线程内串行语义一致
  - volatile变量的写在读前面
  - 解锁必然在随后的加锁前
  - A先于B，B先于C，则A必然先于C
  - 线程的start()先于它的每一个动作
  - 线程的所有操作先于线程的终结(Thread.join())
  - 线程的中断先于被中断线程的代码
  - 对象的构造函数执行、结束先于finalize()方法
